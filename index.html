<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>iCat Ultra Simple</title>
    <style>
        body{
            margin:0;
            padding:20px;
            height:100vh;
            display:flex;
            justify-content:center;
            align-items:center;
            background:#222;
            font-family:-apple-system,system-ui,sans-serif;
            color:#fff;
            overflow:hidden;
        }
        .wrap{
            max-width:480px;
            width:100%;
            text-align:center;
        }
        .screen{
            position:relative;
            width:100%;
            padding-top:140%;
            background:#000;
            border-radius:24px;
            overflow:hidden;
            margin-bottom:16px;
        }
        #catImg{
            position:absolute;
            inset:0;
            width:100%;
            height:100%;
            object-fit:cover;
            opacity:0;
            transition:opacity .4s,filter .4s,transform .4s;
            filter:blur(8px);
            transform:scale(1.05);
        }
        #catImg.loaded{
            opacity:1;
            filter:blur(0);
            transform:scale(1);
        }
        #status{
            position:absolute;
            left:50%;
            top:50%;
            transform:translate(-50%,-50%);
            font-size:14px;
            text-shadow:0 0 6px rgba(0,0,0,.8);
            padding:0 12px;
        }
        button{
            width:90px;
            height:90px;
            border-radius:50%;
            border:none;
            background:#eee;
            color:#333;
            font-size:16px;
        }
    </style>
</head>
<body>
<div class="wrap">
    <div class="screen">
        <div id="status"></div>
        <!-- ПРОСТО КАРТИНКА, БЕЗ fetch -->
        <img id="catImg" alt="Cat">
    </div>
    <button onclick="nextCat()">Кот</button>
</div>

<script>
const img = document.getElementById('catImg');
const status = document.getElementById('status');
let isLoading = false;

// маленький и быстрый кот с CATAAS
function buildCatUrl() {
    // type=small — уменьшенное изображение, грузится быстрее
    return 'https://cataas.com/cat?type=small&t=' + Date.now();
}

function nextCat() {
    if (isLoading) return;
    isLoading = true;

    status.textContent = 'Загружаем кота...';
    img.classList.remove('loaded');
    img.removeAttribute('src');

    const url = buildCatUrl();

    const slowTimer = setTimeout(() => {
        if (!img.classList.contains('loaded')) {
            status.textContent = 'Очень медленный интернет...';
        }
    }, 4000);

    img.onload = () => {
        clearTimeout(slowTimer);
        status.textContent = '';
        img.classList.add('loaded');
        isLoading = false;
    };

    img.onerror = () => {
        clearTimeout(slowTimer);
        status.textContent = 'Кот не загрузился :(';
        isLoading = false;
    };

    img.src = url;
}

// первый кот
nextCat();
</script>
</body>
</html>
