<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>iCat Random</title>
    <style>
        :root{
            --main-bg:#eef1f5;
            --device-body-light:#ffffff;
            --device-body-dark:#e6e9ef;
            --screen-off-bg:#2c2c2e;
            --shadow-outer-dark:rgba(166,171,189,0.7);
            --shadow-outer-light:rgba(255,255,255,0.9);
            --shadow-inset-dark:rgba(0,0,0,0.3);
            --shadow-inset-light:rgba(255,255,255,0.1);
            --accent-color:#007aff;
        }
        *{box-sizing:border-box;}
        body{
            margin:0;
            padding:20px;
            height:100dvh;
            width:100vw;
            display:flex;
            justify-content:center;
            align-items:center;
            background:radial-gradient(circle at center,#f8f9fb 0%,#eef1f5 100%);
            font-family:-apple-system,system-ui,sans-serif;
            overflow:hidden;
            -webkit-user-select:none;
            user-select:none;
        }
        .device-chassis{
            width:100%;
            height:100%;
            max-width:500px;
            max-height:850px;
            background:linear-gradient(145deg,var(--device-body-light),var(--device-body-dark));
            border-radius:50px;
            padding:25px;
            box-shadow:
                25px 25px 50px var(--shadow-outer-dark),
                -25px -25px 50px var(--shadow-outer-light);
            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:space-between;
            position:relative;
            border:2px solid rgba(255,255,255,0.5);
        }
        .display-panel{
            width:100%;
            flex-grow:1;
            background-color:var(--screen-off-bg);
            border-radius:32px;
            overflow:hidden;
            position:relative;
            margin-bottom:25px;
            display:flex;
            justify-content:center;
            align-items:center;
            box-shadow:
                inset 4px 4px 15px var(--shadow-inset-dark),
                inset -4px -4px 15px var(--shadow-inset-light);
            border:3px solid #1a1a1a;
        }
        .display-panel::after{
            content:'';
            position:absolute;
            inset:0;
            background:linear-gradient(135deg,rgba(255,255,255,0.15) 0%,rgba(255,255,255,0) 50%);
            pointer-events:none;
            z-index:3;
        }
        .cat-image{
            width:100%;
            height:100%;
            object-fit:cover;
            opacity:0;
            transition:opacity .5s ease-in-out,filter .5s,transform .5s;
            z-index:2;
            filter:blur(10px);
            transform:scale(1.05);
        }
        .cat-image.loaded{
            opacity:1;
            filter:blur(0);
            transform:scale(1);
        }
        .status-msg{
            position:absolute;
            font-size:16px;
            color:#ffeb3b;
            z-index:4;
            font-weight:500;
            letter-spacing:1px;
            text-shadow:0 0 5px rgba(0,0,0,0.7);
            text-align:center;
            padding:0 16px;
        }
        .cat-btn{
            width:85px;
            height:85px;
            flex-shrink:0;
            border-radius:50%;
            border:none;
            background:linear-gradient(145deg,var(--device-body-light),var(--device-body-dark));
            box-shadow:
                10px 10px 20px rgba(166,171,189,0.8),
                -10px -10px 20px var(--shadow-outer-light);
            cursor:pointer;
            display:flex;
            justify-content:center;
            align-items:center;
            transition:all .15s ease;
            z-index:2;
            outline:none;
            -webkit-tap-highlight-color:transparent;
            position:relative;
        }
        .cat-btn::before{
            content:'';
            position:absolute;
            inset:-2px;
            border-radius:50%;
            border:1px solid rgba(255,255,255,0.6);
            pointer-events:none;
        }
        .cat-btn svg{
            width:34px;
            height:34px;
            fill:#555;
            transition:fill .2s,transform .2s;
        }
        .cat-btn:active{
            box-shadow:
                inset 5px 5px 10px rgba(166,171,189,0.9),
                inset -5px -5px 10px var(--shadow-outer-light);
            transform:scale(0.97);
        }
        .cat-btn:active svg{
            fill:var(--accent-color);
            transform:scale(0.9);
        }
    </style>
</head>
<body>

<div class="device-chassis">
    <div class="display-panel">
        <div class="status-msg" id="status" style="display:none;"></div>
        <img id="catImg" class="cat-image" src="" alt="Cat">
    </div>

    <button class="cat-btn" onclick="nextCat()" aria-label="Next">
        <svg viewBox="0 0 24 24">
            <path d="M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M9,10C9.55,10 10,10.45 10,11C10,11.55 9.55,12 9,12C8.45,12 8,11.55 8,11C8,10.45 8.45,10 9,10M15,10C15.55,10 16,10.45 16,11C16,11.55 15.55,12 15,12C14.45,12 14,11.55 14,11C14,10.45 14.45,10 15,10M12,16.5C14.33,16.5 16.32,15.13 17.14,13.14L16.5,12.5C15.91,13.97 14.34,15 12.5,15C10.66,15 9.09,13.97 8.5,12.5L7.86,13.14C8.68,15.13 10.67,16.5 12,16.5Z" />
        </svg>
    </button>
</div>

<script>
const img = document.getElementById('catImg');
const status = document.getElementById('status');
let isLoading = false;

// Альтернативные источники изображений котов
const catImageSources = [
    // The Cat API (cataas.com) - популярный и надежный
    () => `https://cataas.com/cat?width=800&height=1000&t=${Date.now()}`,
    
    // PlaceKitten.com - простой и быстрый
    () => `https://placekitten.com/800/1000?image=${Math.floor(Math.random() * 16) + 1}`,
    
    // Random.cat - еще один популярный источник
    () => `https://api.thecatapi.com/v1/images/search?format=src&mime_types=jpg,png&size=med`,
    
    // Резервный через picsum.photos с тегом cats
    () => `https://picsum.photos/800/1000?random=${Date.now()}`
];

let currentSourceIndex = 0;

function getNextCatUrl() {
    const source = catImageSources[currentSourceIndex];
    currentSourceIndex = (currentSourceIndex + 1) % catImageSources.length;
    return source();
}

function nextCat() {
    if (isLoading) return;
    isLoading = true;

    status.style.display = 'block';
    status.textContent = 'Поиск котика...';
    img.classList.remove('loaded');
    img.removeAttribute('src');

    const url = getNextCatUrl();

    const errorTimer = setTimeout(() => {
        if (!img.classList.contains('loaded')) {
            handleImageError();
        }
    }, 10000);

    img.onload = () => {
        clearTimeout(errorTimer);
        status.style.display = 'none';
        img.classList.add('loaded');
        isLoading = false;
    };

    img.onerror = () => {
        clearTimeout(errorTimer);
        handleImageError();
    };

    img.src = url;
}

function handleImageError() {
    status.textContent = 'Поиск котика...';
    isLoading = false;
    
    // Автоматически пробуем следующий источник через короткую задержку
    setTimeout(() => {
        if (!isLoading) {
            nextCat();
        }
    }, 500);
}

// первый кот при старте
nextCat();
</script>

</body>
</html>
